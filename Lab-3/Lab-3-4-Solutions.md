# Lab3-4 Sorular

Bu lab uygulamasında `Practical Malware Analysis` kitabıyla birlikte verilmiş olan `Lab03-04.exe` dosyası üzerinden analiz gerçekleştirilecek ve sorulan sorularak cevaplar verilmeye çalışılacaktır. 

Bu içeriklerin amacı, direkt olarak sorulan sorulara cevap vermek değil, aynı zamanda malware analizi konusunda aydınlatıcı ve faydalı bir içerik havuzu oluşturmaktadır. Gerektiği yerlerde detaya girilecektir. Zaten kitabı aldıysanız, kitabın bir bölümü bu soruların cevaplarını detaylı bir şekilde veriyor. Burada amaç, cevapların içerisinde gizli kalmış, değinilmesi gereken konulara da değinerek bir fayda sağlabilmek. O halde başlayalım.

İlk sorumuz,

**1- What happens when you run this file?**

Dosyamızı çalıştırdıktan kısa bir süre sonra kendini silmektedir. Şimdi bunu nasıl yapıyor, biraz detaya inip inceleyelim. Uygulamamızı çalıştırtırdığımızda aşağıdaki görselde belirtilen cmd.exe process'i `/c del <dosya yolu> >> NUL` komutu ile çalıştırılmaktadır. Dolayısıyla dosya kendisini silmektedir.

![](/Lab-3/images/Lab3-4-image.png "lab3")

Ayrıca dosyanın stringlerini inceleyecek olursak, **GET, NOTHING, DOWNLOAD, UPLOAD** gibi HTTP spesifik komutların olduğunu görmekteyiz. Ayrıca `HTTP/1.0\r\n\r\n` ve `SLEEP` gibi ifadelerin yanında bazı url adreslerinin bulunması da, bu uygulamanın bir `HTTP backdoor` olduğuna işaret etmektedir.

Bir diğer dikkat çekici husus ise, uygulamanın kernel32.dll dosyasından `GetLocalTime` fonksiyonunu import etmiş olması. Ayrıca string ifadeler içerisinde bir haftanın tüm günlerini barındıran bir string bulunmaktadır. Buda bize bu uygulamanın zamana bağlı aksiyonlar aldığını göstermektedir. En azından böyle bir yorum yapmak, zannımca yanlış olmaz. 

**2- What is causing the roadblock in dynamic analysis?**

Dosyanın bir süre sonra kendisini silmesi tam olarak dinamik analiz yapmamıza engel olmaktadır. Ayrıca anti-debug teknikleride kullanıyor olabilir. Bu sorunun cevabını advanced dynamic analysis konusundan sonra tekrar arayacağız.

**3- Are there other ways to run this program?**

IDA Pro vb. uygulamalar yardımı ile bu zararlı çalıştırılıp, analiz edilebilir.





